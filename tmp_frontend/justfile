set dotenv-load

default: dev

# Development server
dev:
    npm run dev -- --port ${SPACENOTE_TMP_FRONTEND_PORT:-3001}

# Build for production
build:
    npm run build

# Type checking
typecheck:
    npm run typecheck

# Run tests
test:
    npm run test

# Install dependencies
install:
    npm install

# Clean build artifacts
clean:
    rm -rf dist node_modules/.cache

# Run frontend on port 8002 for AI agent
agent-start:
    SPACENOTE_SPA_PORT=8002 SPACENOTE_PORT=8001 npm run dev > ../.spa-agent.log 2>&1 & echo $! > ../.spa-agent.pid

agent-stop:
    -pkill -F ../.spa-agent.pid 2>/dev/null || true
    -rm -f ../.spa-agent.pid ../.spa-agent.log